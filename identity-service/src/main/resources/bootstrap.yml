server:
  port: ${PORT:9096}
spring:
  application:
    name: identity-service
  cloud:
    config:
      uri: ${CONFIG_SERVER_URI:http://localhost:8888}
      failFast: ${CONFIG_SERVER_FAILFAST:false}
    discovery:
      enabled: ${DISCOVERY_ENABLED:false}
  jpa:
    show-sql: false
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
      use-new-id-generator-mappings: true
  datasource:
    driverClassName: org.postgresql.Driver
    url: jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:5432}/${POSTGRES_DB:identityDB}
    username: ${POSTGRES_USER:root}
    password: ${POSTGRES_PASSWORD:changeme}
  mail:
    host: ${SMTP_HOST:localhost}
    port: ${SMTP_PORT:25}
    username: ${SMTP_USERNAME}
    password: ${SMTP_PASSWORD}
    smtp.auth: true
    properties.mail.smtp.starttls.enable: true

logstash:
  uri: ${LOGSTASH_URI:localhost:5000}

nimble:
  uaa:
    url: ${UAA_URI:http://localhost:9090}
    clientid: ${UAA_CLIENT_ID:sultans}
    clientsecret: ${UAA_CLIENT_SECRET:sultanssecret}
  cors_enabled: false

---

spring:
  profiles: kubernetes

nimble:
  db-credentials-json: ${DB_CREDENTIALS_JSON}
  cors_enabled: true

---

spring:
  profiles: local_dev
  jpa:
    database-platform: ${IDENTITY_DB_DIALECT:org.hibernate.dialect.H2Dialect}
    hibernate:
      ddl-auto: create
  datasource:
    driverClassName: ${IDENTITY_DB_DRIVER:org.h2.Driver}
    url: ${POSTGRES_HOST:jdbc:h2:mem:AZ;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE}
  mail:
    host: localhost # in-v3.mailjet.com
    port: 8465 # 465

nimble:
  corsEnabled: true
  mail:
    defaultFrom: "johannes.innerbichler@salzburgresearch.at"
  keycloak:
    serverUrl: http://localhost:10096/auth
    realm: master
    admin:
      username: admin
      password: nimbleplatform
      cliendId: admin-cli
      cliendSecret: ae3f7b66-903b-4333-94fe-5c158ce70d33
