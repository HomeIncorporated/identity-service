server:
  port: ${PORT:9096}
spring:
  application:
    name: identity-service${APPLICATION_NAME_SUFFIX:}
  cloud:
    config:
      enabled: ${CONFIG_SERVER_ENABLED:true}
      uri: ${CONFIG_SERVER_URI:http://localhost:8888}
      failFast: ${CONFIG_SERVER_FAILFAST:false}
    discovery:
      enabled: ${DISCOVERY_ENABLED:false}
  jpa:
    show-sql: false
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        temp:
          use_jdbc_metadata_defaults: false
  datasource:
    driverClassName: org.postgresql.Driver
    url: jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:5432}/${POSTGRES_DB:identityDB}
    username: ${POSTGRES_USER:root}
    password: ${POSTGRES_PASSWORD:changeme}
    maxActive: 3
    maxIdle: 3
  mail:
    debug: false  # disable printing email to log output
    host: ${SMTP_HOST:localhost}
    port: ${SMTP_PORT:25}
    defaultFrom: ${SMTP_DEFAULT_FROM:}
    username: ${SMTP_USERNAME:}
    password: ${SMTP_PASSWORD:}
    smtp.auth: true
    properties.mail.smtp.starttls.enable: true
  jackson:
    default-property-inclusion: NON_NULL
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS}
    consumer:
      group-id: identity-service:${KAFKA_CONSUMER_GROUP_ID_SUFFIX:}
    properties:
      sasl:
        jaas:
          config: ${KAFKA_JAAS_CONFIG}
  http:
    multipart:
      max-file-size: 10Mb
      max-request-size: 10Mb

logstash:
  uri: ${LOGSTASH_URI:localhost:5000}

nimble:
  corsEnabled: ${CORS_ENBALED:false}
  uaa:
    url: ${UAA_URI:http://localhost:9090}
    clientid: ${UAA_CLIENT_ID:sultans}
    clientsecret: ${UAA_CLIENT_SECRET:sultanssecret}
  keycloak:
    serverUrl: ${KEYCLOAK_URL:http://localhost:10096/auth}
    realm: ${KEYCLOAK_REALM:master}
    admin:
      username: ${KEYCLOAK_ADMIN_USERNAME:admin}
      password: ${KEYCLOAK_ADMIN_PASSWORD:password}
      cliendId: ${KEYCLOAK_ADMIN_CLIENT_ID:admin-cli}
      cliendSecret: ${KEYCLOAK_ADMIN_CLIENT_SECRET}
  oauth:
    client:
      cliendId: ${OAUTH_CLIENT_ID:nimble-client}
      cliendSecret: ${OAUTH_CLIENT_SECRET}
      accessTokenUri: ${OAUTH_CLIENT_ACCESSTOKEN_URI}
  frontend:
    url: ${FRONTEND_URL:http://localhost:9092}
  kafka:
    topics:
      companyUpdates: ${KAFKA_TOPIC_COMPANY_UPDATES:company-updates}

---

spring:
  profiles: local_dev
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        temp:
          use_jdbc_metadata_defaults: true
  h2:
    console:
      enabled: true
      path: /h2-console
  datasource:
    name: identitydb
    driverClassName: org.h2.Driver
    url: jdbc:h2:file:~/identitydb_h2;
    initialize: false
    username: sa
    password:
  mail:
    debug: true  # prints email to log output
    host: localhost # in-v3.mailjet.com
    port: 8465 # 465

nimble:
  corsEnabled: true

---

spring:
  profiles: test
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update
  h2:
    console:
      enabled: false
  datasource:
    name: channeldb
    driverClassName: org.h2.Driver
    url: jdbc:h2:mem:channeldb
    initialize: true
    username: sa
    password:
  kafka:
    bootstrap-servers: ${spring.embedded.kafka.brokers}
    consumer:
      group-id: "test-identity-service"
    properties:
      sasl:
        jaas:
          config: ""
